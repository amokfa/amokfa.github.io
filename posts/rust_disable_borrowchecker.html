<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" sizes="32x32" type="image/x-icon">
    <meta name="viewport" content="width=device-width, min-width=600, initial-scale=1, minimum-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <meta name="description" content="How you can bypass borrow checking in your rust programs if you need to">
    <meta name="keywords" content="rust,games,coding">
    <title>Disabling the borrow checker (DRAFT)</title>
</head>

<body class="dark">
    <script src="/static/js/dynamic-pre.js"></script>
    <div id="body_wrapper"><style>html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,var,b,u,i,center,dl,dt,dd,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:1em;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:"";content:none}table{border-collapse:collapse;border-spacing:0}:root{background:#383838;box-sizing:border-box;scroll-behavior:smooth}*{box-sizing:inherit}:root{overflow-x:hidden}#body_wrapper{user-select:none;font-family:"Roboto",sans-serif;width:100%}@media(max-width: 800px){#body_wrapper{font-size:.85em;padding:0}#body_wrapper #left-sidebar,#body_wrapper #right-sidebar{width:100%;height:100%;position:fixed;top:0}#body_wrapper #left-sidebar{left:-100%}#body_wrapper #right-sidebar{left:100%}#body_wrapper #page_content{width:100%}}@media(min-width: 800px){#body_wrapper{font-size:1em;padding:1em;display:flex;grid-gap:1em;flex-direction:row;align-items:flex-start}#body_wrapper #left-sidebar,#body_wrapper #right-sidebar{position:sticky;top:1em;height:calc(100vh - 2em)}#body_wrapper #left-sidebar,#body_wrapper #right-sidebar,#body_wrapper #page_content{width:0;flex-grow:1;flex-shrink:0}#body_wrapper #page_content{flex-grow:2}#body_wrapper #page_content{user-select:text}}#body_wrapper #left-sidebar,#body_wrapper #right-sidebar{display:flex;flex-direction:column;justify-content:center}#body_wrapper #left-sidebar .open,#body_wrapper #left-sidebar .close,#body_wrapper #right-sidebar .open,#body_wrapper #right-sidebar .close{position:absolute;bottom:10%;width:30px;height:30px;border-radius:10em;opacity:.6}#body_wrapper #left-sidebar .dialog,#body_wrapper #right-sidebar .dialog{max-height:100%;display:flex;flex-direction:column;align-items:center}#body_wrapper #left-sidebar .dialog .heading,#body_wrapper #right-sidebar .dialog .heading{flex-grow:0;flex-shrink:0;width:100%;padding:.5em;font-size:1.3em}#body_wrapper #left-sidebar .dialog .content,#body_wrapper #right-sidebar .dialog .content{flex-grow:1;width:100%;overflow-y:auto;margin:0}#body_wrapper #right-sidebar .dialog .content{padding:1em}#body_wrapper #right-sidebar .dialog .content button{width:100%;font-size:1.1em;padding:.3em 1em;transition:background .1s;font-weight:bold;border-radius:2px}#body_wrapper #right-sidebar .dialog .content #toggle_theme_wrapper{display:inline-block;cursor:pointer;padding:5px;border-radius:3px}#body_wrapper #right-sidebar .dialog .content .control-buttons{display:flex;flex-direction:row;align-items:center}#body_wrapper #right-sidebar .dialog .content .control-buttons>*{margin-top:1em;margin-right:1em}#body_wrapper #right-sidebar .open{left:-50px;transform:rotateZ(180deg)}#body_wrapper #right-sidebar .close{left:20px}#body_wrapper #left-sidebar .content{padding-left:2em}#body_wrapper #left-sidebar li{line-height:1.5em;margin:.5em 0}#body_wrapper #left-sidebar .open{right:-50px}#body_wrapper #left-sidebar .close{right:20px;transform:rotateZ(180deg)}@media(min-width: 800px){#body_wrapper #left-sidebar .open,#body_wrapper #left-sidebar .close,#body_wrapper #right-sidebar .open,#body_wrapper #right-sidebar .close{display:none !important}}@media(min-width: 800px){*::-webkit-scrollbar{width:10px;height:10px;background:#d3d3d3}*::-webkit-scrollbar-thumb{background:gray;border-radius:1em;border:2px solid #d3d3d3}*::-webkit-scrollbar-thumb:hover{background:#444343}}.bg{z-index:-2;position:fixed;top:0;left:0;width:100vw;height:100vh;object-fit:cover;filter:brightness(40%);transition:opacity 500ms}#view_bg_btn{z-index:3;width:5em;height:5em;padding:1em;border-radius:100%;position:fixed;left:-2em;bottom:-2em;transition:left .1s linear,bottom .1s linear,width .1s linear,height .1s linear;display:flex;justify-content:center;align-items:center}#view_bg_btn:hover{left:-1em;bottom:-1em;width:7em;height:7em}#view_bg_btn #screen_img{width:70%;height:50%;border:2px solid}.image_viewer{opacity:0;position:fixed;top:0;left:0;width:100vw;height:100vh;overflow:scroll;z-index:4;transition:opacity .2s linear;pointer-events:all;display:flex;align-items:center;justify-content:center}@media(max-width: 800px){.image_viewer{padding:1em}}@media(min-width: 800px){.image_viewer{padding:5em}}.image_viewer>img{max-width:100%;max-height:100%;object-fit:contain;border-radius:5px;border:3px solid}@media(max-width: 800px){#body_wrapper #page_content{transition:opacity .2s linear}#body_wrapper #left-sidebar,#body_wrapper #right-sidebar{transition:left .2s ease-out;z-index:1}#body_wrapper #left-sidebar.up,#body_wrapper #right-sidebar.up{z-index:2;left:0}#body_wrapper #left-sidebar.up .open,#body_wrapper #right-sidebar.up .open{display:none}#body_wrapper #left-sidebar.up .close,#body_wrapper #right-sidebar.up .close{display:block}#body_wrapper #left-sidebardown,#body_wrapper #right-sidebardown{opacity:0}#body_wrapper #left-sidebar .close,#body_wrapper #right-sidebar .close{display:none}}@media(min-width: 800px){body #page_content{opacity:1 !important}}#page_content header{padding:1em}#page_content header #main_title{padding:0 1em;width:100%;text-align:center;margin-top:1em}#page_content header nav{display:flex;flex-wrap:wrap;justify-content:space-around;align-items:baseline;grid-gap:1em}#page_content header nav a{text-decoration:none;color:inherit;font-weight:500;padding:.5em 1em;min-width:10em;border-radius:.3em;text-align:center}#page_content article{line-height:2em;padding:0 1em;overflow:hidden}#page_content article section{margin:1em 0;padding:1em}#page_content article section p{margin:1rem 0}#page_content article section li{margin:1em 0}#page_content article section prog{margin:.5em 0}@media(max-width: 800px){#page_content header{padding:0 0 1em}#page_content header nav{width:100%;flex-direction:column;align-items:center;grid-gap:0}#page_content header nav a{border-radius:0;width:100%;padding:1.5em}#page_content header nav a+a{border-top:none}#page_content article{padding:0}}#page_content footer{display:flex;flex-direction:column;align-items:center;width:100%;padding:1em;grid-gap:1em}#page_content footer .links{display:flex;align-items:center;justify-content:center;grid-gap:3em}@media(max-width: 800px){#page_content footer .links{flex-direction:column;grid-gap:2em}}#page_content footer .links .social .footer-title{font-size:1.2em;font-weight:bold;text-align:center;margin-bottom:.5em}#page_content footer .links .social>*{margin:0 .5em}.tags_list{display:flex;align-items:center;justify-content:center;grid-gap:1em;flex-wrap:wrap;width:100%;margin:1em 0;list-style:none;padding:0 1em}.tags_list .tag_element{display:block}.tag_element{text-align:center;cursor:pointer;min-width:8em;line-height:1rem;padding:.3em 1em;font-size:.8em;border-radius:10em}.tag_element:hover{text-decoration:none}prog{font-size:.85em;line-height:1.5em;font-family:"Roboto Mono",monospace;display:block;white-space:pre;padding:.5em;overflow-x:auto;margin-top:0px}prog *{background:none !important}progi,formula{font-family:"Roboto Mono",monospace;padding:.15em .2em;border-radius:5px;border:2px solid;overflow-x:auto;overflow-y:hidden;white-space:nowrap;max-width:100%;display:inline-block;vertical-align:middle;line-height:1em}blockquote{padding:1em 2em;border-left:5px solid}h1,h2,h3,h4,h5,h6{line-height:1em;font-weight:bold;word-break:break-word}h1{font-size:2em}h2{font-size:1.5em;text-align:center;border-radius:5px;padding:5px}h3{font-size:1.3em}h4{font-size:1.2em}h5{font-size:1.1em}h6{font-size:1em}em{font-style:italic;font-weight:500}em{font-style:italic}.graphviz{display:flex;justify-content:center;margin:1em}ul,ol{padding:0 1em}.post_card{margin:1em;padding:1em;border:3px solid;border-radius:1em}.post_card>*{margin:.5em}.post_card .post_description{line-height:1.5em}.svg-icon{width:2em;height:2em;background-size:contain;background-repeat:no-repeat;display:inline-block}*{transition:background .1s ease-out}body.light{color:#111}body.light #left-sidebar .dialog,body.light #right-sidebar .dialog{background:#fcfdf7}body.light #left-sidebar .dialog .heading,body.light #right-sidebar .dialog .heading{background:linear-gradient(to top, #fcfdf7, 5%, #cede7d)}body.light #right-sidebar button{color:#111;background:none;border:1px solid #dde9a5}body.light #right-sidebar button:hover{background:#dde9a5}body.light #right-sidebar #toggle_theme_wrapper:hover{background-color:rgba(0,0,0,.1333333333)}body.light #right-sidebar #toggle_theme_wrapper #toggle_theme{background-color:#000}body.light #view_bg_btn{background:rgba(50,50,50,.7)}body.light #view_bg_btn #screen_img{border-color:#2a2a2a;background:#575656}body.light .image_viewer{background:rgba(0,0,0,.95)}body.light .image_viewer>img{border-color:#0e0e2a}body.light header{background:#e9ffa4}body.light header nav a{background:#f6a75c}body.light header nav a.current{background:#d75404}@media(min-width: 800px){body.light header nav a:hover{background:#d75404}}body.light footer{background:#e9ffa4}body.light footer .footer-title{color:#032a71}body.light article{background:rgba(255,255,255,.1333333333)}body.light article section{background:#fcfdf7}body.light a{color:#3c8f17;text-decoration:none}body.light a:visited{color:#3c8f17}body.light a:hover{text-decoration:none;color:#28620e}body.light a.tag_element{color:#111;background:#d5ecbc}body.light a.tag_element:visited{color:#111}body.light a.tag_element:hover{color:#111;background:#bde5a3}body.light prog,body.light formula{background:#fff}body.light progi{background:#fff;border-color:#c1bfbf}body.light blockquote{border-color:#f8aeae;background:#fdcfd2}body.light h2{background:#dde9a5}body.light .post_card{background:#edf3ce;border-color:#dde9a5}body.dark{color:#cecdcd}body.dark #left-sidebar .dialog,body.dark #right-sidebar .dialog{background:#1f2021}body.dark #left-sidebar .dialog .heading,body.dark #right-sidebar .dialog .heading{background:linear-gradient(to top, #1f2021, 5%, #383a3b)}body.dark #right-sidebar button{color:#cecdcd;background:none;border:1px solid #505356}body.dark #right-sidebar button:hover{background:#505356}body.dark #right-sidebar #toggle_theme_wrapper:hover{background-color:rgba(255,255,255,.1333333333)}body.dark #right-sidebar #toggle_theme_wrapper #toggle_theme{background-color:#fff}body.dark #view_bg_btn{background:rgba(50,50,50,.7)}body.dark #view_bg_btn #screen_img{border-color:#2a2a2a;background:#575656}body.dark .image_viewer{background:rgba(0,0,0,.95)}body.dark .image_viewer>img{border-color:#0e0e2a}body.dark header{background:#2b2f2a}body.dark header nav a{background:#3e3244}body.dark header nav a.current{background:#1c171e}@media(min-width: 800px){body.dark header nav a:hover{background:#1c171e}}body.dark footer{background:#2b2f2a}body.dark footer .footer-title{color:#75a6ff}body.dark article{background:rgba(255,255,255,.1333333333)}body.dark article section{background:#1f2021}body.dark a{color:#3c8f17;text-decoration:none}body.dark a:visited{color:#3c8f17}body.dark a:hover{text-decoration:none;color:#28620e}body.dark a.tag_element{color:#cecdcd;background:#481515}body.dark a.tag_element:visited{color:#cecdcd}body.dark a.tag_element:hover{color:#cecdcd;background:#341010}body.dark prog{background:#000}body.dark progi,body.dark formula{background:#000;border-color:#414141}body.dark blockquote{border-color:#f8aeae;background:#331d34}body.dark h2{background:#2b2d2e}body.dark .post_card{background:#131314;border-color:#000}/*# sourceMappingURL=styles.css.map */
</style><img src="/static/img/bg.webp" class="bg" id="main_bg" loading="lazy">
        <div id="view_bg_btn">
            <div id="screen_img"></div>
        </div>
        <div id="left-sidebar">
            <div class="dialog">
                <div class="heading">Table of content</div>
                <ol class="content">
                    <li><a href="#why">Why?</a></li>
                    <li><a href="#disabling_lifetime_and_mutability_checks">Disabling lifetime and mutability checks.</a></li>
                    <li><a href="#c_like_late_initialization">C like late initialization</a></li>
                    <li><a href="#should_you_write_rust_like_this">Should you write rust like this?</a></li>
                    <li><a href="#why_even_use_rust_if_youre_going_to_bypass_the_borrow_checker">Why even use rust if you're going to bypass the borrow checker?</a></li>
                </ol>
            </div>
            <div class="svg-icon open" alt="open left sidebar" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwMDAiIGhlaWdodD0iMTAwMCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KCiAgICA8Y2lyY2xlIGN4PSI1MDAiIGN5PSI1MDAiIHI9IjUwMCIgZmlsbD0iI2ZmZmZmZjg4IiBzdHJva2U9ImJsYWNrIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjEwMCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIC8+CiAgICA8cG9seWxpbmUgcG9pbnRzPSI0MDAsMzAwIDYwMCw1MDAgNDAwLDcwMCIKICAgICAgICAgICAgICBzdHJva2U9IiM1NTU1NTUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2Utd2lkdGg6MTAwOyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIvPgo8L3N2Zz4K&quot;);"></div>
            <div class="svg-icon close" alt="close left sidebar" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwMDAiIGhlaWdodD0iMTAwMCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KCiAgICA8Y2lyY2xlIGN4PSI1MDAiIGN5PSI1MDAiIHI9IjUwMCIgZmlsbD0iI2ZmZmZmZjg4IiBzdHJva2U9ImJsYWNrIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjEwMCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIC8+CiAgICA8cG9seWxpbmUgcG9pbnRzPSI0MDAsMzAwIDYwMCw1MDAgNDAwLDcwMCIKICAgICAgICAgICAgICBzdHJva2U9IiM1NTU1NTUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2Utd2lkdGg6MTAwOyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIvPgo8L3N2Zz4K&quot;);"></div>
        </div>
        <div id="page_content">
            <header>
                <nav><a href="/" class="">HOME</a><a href="/projects.html" class="">PROJECTS</a><a href="/tags.html" class="">TAGS</a><a href="/about.html" class="">ABOUT</a></nav>
                <h1 id="main_title">Disabling the borrow checker (DRAFT)</h1>
                <ul class="tags_list">
                    <li><a class="tag_element" href="/tags/rust.html">rust</a></li>
                    <li><a class="tag_element" href="/tags/games.html">games</a></li>
                    <li><a class="tag_element" href="/tags/coding.html">coding</a></li>
                </ul>
            </header>
            <article>
                <section id="why">
                    <h2>Why?</h2>
                    <p> LogLog Games is an indie game studio that moved from unity to rust 3 years ago. They wrote their own game engine in rust and developed and published a game using it as well. Recently they decided to abandon rust and move back to unity. They wrote an <a target="_blank" href="https://loglog.games/blog/leaving-rust-gamedev">article</a> sharing their reasons for this decision. A lot of the reasons could be boiled down to the statement that rust borrow checker is too strict. The compiler will reject valid programs because it cannot prove that they are safe in the framework defined by the creators of the rust language. This is one of the example they used (in the section "Abstraction isn't a choice"): </p><prog class=" language-rust" role="figure"><span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>character<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>selected_duck <span class="token punctuation">{</span>
    <span class="token function">character_select_duck_detail</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">,</span> character<span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">character_select_no_duck</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></prog>
                    <p> Here they are taking a reference to the field <progi role="figure">selected_duck</progi> and in the next line they are passing <progi role="figure">self</progi> to a function. The compilation fails because the function takes a mutable reference to <progi role="figure">self</progi>, and rustc won't allow that because there is already an immutable reference to a field of <progi role="figure">self</progi> in scope. This code won't compile even if <progi role="figure">character_select_duck_detail</progi> isn't mutating the field of <progi role="figure">self</progi> that has been borrowed. The compiler/optimizer simply isn't smart enough to take that into account. So you need to refactor your code to satisfy the compiler. Their argument is that sometimes that refactoring results in suboptimal code. Even if the refactoring doesn't result in suboptimal code, a lot of times it's completely unnecessary and just adds useless burden on the programmer. The model you have of your code in your head might not be the same as the model borrow checker has of your code and in those situations it's just a distraction. </p>
                </section>
                <section id="disabling_lifetime_and_mutability_checks">
                    <h2>Disabling lifetime and mutability checks.</h2>
                    <p> However, there is a way you can turn off the borrow checker if you are fairly sure that the errors it's giving you are false positives. I have a couple utility functions that do this: </p><prog class=" language-rust" role="figure"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">ms</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token class-name">Sized</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r <span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token class-name">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">unsafe</span> <span class="token punctuation">{</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">transmute</span><span class="token punctuation">::</span><span class="token operator">&lt;</span>_<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">mm</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token class-name">Sized</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r <span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">T</span> <span class="token punctuation">{</span>
    <span class="token attribute attr-name">#[allow(mutable_transmutes)]</span>
    <span class="token keyword">unsafe</span> <span class="token punctuation">{</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">transmute</span><span class="token punctuation">::</span><span class="token operator">&lt;</span>_<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></prog>
                    <p> These functions takes a pointer as input, and gives another pointer as output. The output is the same pointer, the same 8 bytes representing a location in memory, but with a different type. </p>
                    <blockquote> Rust veterans will disagree with me here. A reference is not the same thing as a pointer. But it looks like a pointer and quacks like a pointer, so I'm using it like a pointer. </blockquote>
                    <p>
                        <progi role="figure">ms</progi> stands for make static. It takes a regular pointer and gives back a static pointer. Static pointers have infinite lifetime, so if the compiler is complaining about a lifetime error which you know is a false positive, you can wrap that pointer with this function and the compiler will stop complaining. For example, this is some graphics code from a game I'm writing:
                    </p><prog class=" language-rust" role="figure"><span class="token keyword">if</span> frame_idx <span class="token operator">%</span> <span class="token number">30</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> gfx <span class="token operator">=</span> <span class="token function">ms</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>gfx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> screenshot <span class="token operator">=</span> <span class="token function">ms</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>screenshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token namespace">std<span class="token punctuation">::</span>thread<span class="token punctuation">::</span></span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
        gfx<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map_async</span><span class="token punctuation">(</span><span class="token class-name">MapMode</span><span class="token punctuation">::</span><span class="token class-name">Read</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>t<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
            screenshot<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">copy_from_slice</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>gfx<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get_mapped_range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gfx<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span><span class="token function">unmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></prog>
                    <p> The engine takes a screenshot every 0.5s and uses it to show the color under the cursor and save the screenshot. If you remove lines 2 and 3 the compiler will start complaining about lifetimes. It will say that the launched thread might outlive these objects and then I will get a use after free bug. What the compiler doesn't know is that these objects live as long as the game. So I use <progi role="figure">ms</progi> to silence the compiler. </p>
                    <p> I could wrap these objects with <progi role="figure">Arc&lt;Mutex&lt;&gt;&gt;</progi> but it feels unnecessary in this case. I did put the screenshot buffer inside a mutex for correctness' sake but even that isn't necessary. There are millions of pixels on the screen and a write happens only once every 0.5s. The probability that a pixel will be written to while we are reading it is very low. Even then the pixel color we read will be a blend of the RGBA values of the previous frame and the next frame and will only look like that for one frame, assuming the buffer is not overwritten in multiples of 4 bytes, in which case even that won't happen. Rust gives you guaranteed memory and thread safety, but you might not even need that in many cases. </p>
                    <p>
                        <progi role="figure">mm</progi> stands for make mutable. It takes a constant pointer and returns a mutable pointer. This function can be used to deal with the example they used. <progi role="figure">self</progi> can be wrapped with this function to convert it into a mutable pointer. From the borrow checkers point of view the code is creating two immutable references to <progi role="figure">self</progi> which is allowed:
                    </p><prog class=" language-rust" role="figure"><span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>character<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>selected_duck <span class="token punctuation">{</span>
    <span class="token function">character_select_duck_detail</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">,</span> character<span class="token punctuation">,</span> <span class="token function">mm</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">character_select_no_duck</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></prog>
                    <p> Of course this is about as far away from conventional rust as you could go. If you use these utilities, rustc cannot guarantee memory safety in your program. Warranty void if seal is broken. You will get segmentation faults, use after free bugs, data races, UB, the whole bunch, if you aren't careful. But then some programmers believe the memory bugs are just another class of bugs that you are supposed to weed out before shipping. I personally haven't seen a memory bug that I wasn't able to fix within 5 minutes. </p>
                </section>
                <section id="c_like_late_initialization">
                    <h2>C like late initialization</h2>
                    <p> I use <a target="_blank" href="https://gist.github.com/amokfa/c465442948fb3e53ca9c464848d27773">this wrapper type</a> to do C like late initialization in rust. You can wrap a struct field with it like this: </p><prog class=" language-rust" role="figure"><span class="token attribute attr-name">#[derive(Default)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Global</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> plat<span class="token punctuation">:</span> <span class="token class-name">CInit</span><span class="token operator">&lt;</span><span class="token class-name">Platform</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></prog>
                    <p> The default value of this type is zero initialized. Its contents will not follow the rust ownership/RAII model. If you want to update some data inside this field, you'll have to use <progi role="figure">ci!</progi> macro </p><prog class=" language-rust" role="figure"><span class="token macro property">ci!</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>fonts_supersampled<span class="token punctuation">,</span> <span class="token namespace">fonts_supersampled<span class="token punctuation">::</span></span><span class="token class-name">FontManager</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></prog>
                    <p> The data in there will not be dropped automatically, you'll have to drop it yourself when you're done with it. </p>
                </section>
                <section id="should_you_write_rust_like_this">
                    <h2>Should you write rust like this?</h2><img src="/static/img/seatbelt.jpg">
                    <p> You shouldn't program a TLS library the same way you would program a video game. Vice verse, you shouldn't have to program a video game the same way you would program a TLS library. Video game programming is distinct due to its significant emphasis on extensive prototyping. You need to prototype <em>a lot</em> to figure out what looks good and feels fun. A new feature added years down the road could require a big change in the low level implementation of the engine to implement it efficiently. As evident by the article written by LogLog games, rust is <em>very</em> hostile to such programming patterns. And if you're building a single player game, you need to decide if fearless concurrency and memory safety is worth the loss of ergonomics which rust forces on you for your particular use case. Not to mention that a player will not gain anything by hacking the vulnerabilities in his single player game. </p>
                    <p> For many command-line utilities, it doesn't really matter if your program has vulnerabilities or concurrency problems either, except for how they affect the UX. </p>
                    <p> When you're writing rust like this, you'll have to maintain a list of unchecked invariants in your mind about your program. This is where the memory and concurrency bugs will originate from. It would be a good idea to write them down as well, or encode them in the structure of your program. And the larger your team size is, the more likely it will be that you'll either forget to document these invariants properly, or someone will not understand them properly and cause problems. And the chances of seeing memory bugs will increase. </p>
                    <p> It would definitely be a bad idea to write a library like this and publish it for others to use. The borrow checker is the reason it's so easy to import and use an external dependency in your program. The ownership model of rust is also a contract between the library authors and the users. The users are just going to assume that your library is going to follow it, and if it doesn't, they are going to introduce bugs in their library/program. But for moderately sized <em>applications</em> where security/reliability isn't one of the main concerns, or you want/need to be able to prototype very quickly, there are little to no reasons for not using these techniques. </p>
                </section>
                <section id="why_even_use_rust_if_youre_going_to_bypass_the_borrow_checker">
                    <h2>Why even use rust if you're going to bypass the borrow checker?</h2>
                    <p> If you're bypassing Rust's borrow checker, it might seem like you're throwing away its main selling point—memory safety. But Rust offers much more than just the borrow checker. For one, it provides checked array indexing, which prevents common out-of-bounds bugs at runtime, giving you safety even without a manual bounds check. Rust’s straightforward cross-compilation process also makes it easy to build and deploy for multiple platforms, a far cry from the headaches often faced in languages like C++. Speaking of C++, Rust boasts a sane feature set; it's far less cluttered and avoids the excessive complexity C++ has accumulated over the years. Rust also has a rich and growing community, ensuring that help, libraries, and knowledge are readily available. Plus, it has a rich and stable standard library, which means you can accomplish a lot without resorting to third party libraries. And even when you have to reach for third party libraries, using them is about as easy as it could be. Amazing tooling and IDE support, often missing in newer languages, makes Rust a joy to work with on both small and large projects. Even if you bypass some of its strictest features like the borrow checker, these other advantages still make Rust an incredibly valuable tool for building reliable software. </p>
                </section>
            </article>
            <footer>
                <div class="links">
                    <div class="social">
                        <div class="footer-title">Share this page</div><a class="svg-icon " title="Twitter" href="https://twitter.com/share?text=Disabling the borrow checker (DRAFT)&amp;url=https://amokfa.github.io/posts/rust_disable_borrowchecker.html" rel="noopener" target="_blank" style="background-image: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCIgd2lkdGg9IjUwcHgiIGhlaWdodD0iNTBweCI+CiAgICA8cGF0aCBkPSJNIDExIDQgQyA3LjEzNCA0IDQgNy4xMzQgNCAxMSBMIDQgMzkgQyA0IDQyLjg2NiA3LjEzNCA0NiAxMSA0NiBMIDM5IDQ2IEMgNDIuODY2IDQ2IDQ2IDQyLjg2NiA0NiAzOSBMIDQ2IDExIEMgNDYgNy4xMzQgNDIuODY2IDQgMzkgNCBMIDExIDQgeiIvPgogICAgPHBhdGggZmlsbD0id2hpdGUiIGQ9Ik0gMTMuMDg1OTM4IDEzIEwgMjEuMDIzNDM4IDEzIEwgMjYuNjYwMTU2IDIxLjAwOTc2NiBMIDMzLjUgMTMgTCAzNiAxMyBMIDI3Ljc4OTA2MiAyMi42MTMyODEgTCAzNy45MTQwNjIgMzcgTCAyOS45Nzg1MTYgMzcgTCAyMy40Mzc1IDI3LjcwNzAzMSBMIDE1LjUgMzcgTCAxMyAzNyBMIDIyLjMwODU5NCAyNi4xMDM1MTYgTCAxMy4wODU5MzggMTMgeiBNIDE2LjkxNDA2MiAxNSBMIDMxLjAyMTQ4NCAzNSBMIDM0LjA4NTkzOCAzNSBMIDE5Ljk3ODUxNiAxNSBMIDE2LjkxNDA2MiAxNSB6Ii8+Cjwvc3ZnPg==&quot;);"></a><a class="svg-icon " title="Facebook" href="https://www.facebook.com/sharer.php?u=https://amokfa.github.io/posts/rust_disable_borrowchecker.html" rel="noopener" target="_blank" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTEyLjE5NiAxMTIuMTk2IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMTIuMTk2IDExMi4xOTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8Y2lyY2xlIHN0eWxlPSJmaWxsOiMzQjU5OTg7IiBjeD0iNTYuMDk4IiBjeT0iNTYuMDk4IiByPSI1Ni4wOTgiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGRkZGRkY7IiBkPSJNNzAuMjAxLDU4LjI5NGgtMTAuMDF2MzYuNjcySDQ1LjAyNVY1OC4yOTRoLTcuMjEzVjQ1LjQwNmg3LjIxM3YtOC4zNAoJCWMwLTUuOTY0LDIuODMzLTE1LjMwMywxNS4zMDEtMTUuMzAzTDcxLjU2LDIxLjgxdjEyLjUxaC04LjE1MWMtMS4zMzcsMC0zLjIxNywwLjY2OC0zLjIxNywzLjUxM3Y3LjU4NWgxMS4zMzRMNzAuMjAxLDU4LjI5NHoiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K&quot;);"></a><a class="svg-icon " title="Reddit" href="https://www.reddit.com/submit?title=Disabling the borrow checker (DRAFT)&amp;url=https://amokfa.github.io/posts/rust_disable_borrowchecker.html" rel="noopener" target="_blank" style="background-image: url(&quot;data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMnB0IiB2aWV3Qm94PSIwIDAgNTEyIDUxMi4wMDAzOCIgd2lkdGg9IjUxMnB0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMTY5Ljk5NDAwMTA4MzQiIHgyPSIyOTkuNDkzNDEzNTkwNCIgeTE9IjcxLjk4NjIyNzAxIiB5Mj0iMzQ5LjA1NDg0NDg4NjQiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmNDUwMCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2RkMzQwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkZDM0MDAiIHN0b3Atb3BhY2l0eT0iMCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2JmMjgwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjM2NC4yODI1MjM3ODI0IiB4Mj0iLTM3OS41ODY0MzI3MTE0IiB4bGluazpocmVmPSIjYiIgeTE9IjMxNC4wODY4MzYxMzU2IiB5Mj0iLTg0Ljk1MjE4MDgxNjYiLz48bGluZWFyR3JhZGllbnQgaWQ9ImQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMjU2LjAwMDMiIHgyPSIyNTYuMDAwMyIgeGxpbms6aHJlZj0iI2IiIHkxPSI0NDEuNzI1NjgiIHkyPSI1MDAuMDkxNDk2NDUxNiIvPjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI1MDIuNTY4NDYyNDE3OCIgeDI9IjIzNy41MzMwNTQ0MTc4IiB4bGluazpocmVmPSIjYiIgeTE9IjQ4Ni42ODc2MzE4Njg2IiB5Mj0iMjE1LjYyODY5MTg2ODYiLz48cGF0aCBkPSJtNDIwLjQyMTg3NSA1MDMuMjM0Mzc1Yy0xMDkuNTAzOTA2IDExLjY4NzUtMjE5LjMzOTg0NCAxMS42ODc1LTMyOC44NDM3NSAwLTQzLjY2NDA2My00LjY2MDE1Ni03OC4xNTIzNDQtMzkuMTQ4NDM3LTgyLjgxMjUtODIuODE2NDA2LTExLjY4NzUtMTA5LjUwMzkwNy0xMS42ODc1LTIxOS4zMzU5MzggMC0zMjguODM5ODQ0IDQuNjYwMTU2LTQzLjY2NDA2MyAzOS4xNDg0MzctNzguMTUyMzQ0IDgyLjgxMjUtODIuODEyNSAxMDkuNTAzOTA2LTExLjY4NzUgMjE5LjMzNTkzNy0xMS42ODc1IDMyOC44Mzk4NDQgMCA0My42Njc5NjkgNC42NjAxNTYgNzguMTU2MjUgMzkuMTQ4NDM3IDgyLjgxNjQwNiA4Mi44MTI1IDExLjY4NzUgMTA5LjUwMzkwNiAxMS42ODc1IDIxOS4zMzU5MzcgMCAzMjguODM5ODQ0LTQuNjYwMTU2IDQzLjY2Nzk2OS0zOS4xNDQ1MzEgNzguMTU2MjUtODIuODEyNSA4Mi44MTY0MDZ6bTAgMCIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Im00NzUuMzg2NzE5IDExMC4wOTc2NTZjLTQuMTMyODEzLTM4Ljc0NjA5NC0zNC43MzQzNzUtNjkuMzUxNTYyLTczLjQ4NDM3NS03My40ODgyODEtOTcuMTcxODc1LTEwLjM2NzE4Ny0xOTQuNjMyODEzLTEwLjM2NzE4Ny0yOTEuODA0Njg4IDAtMzguNzQ2MDk0IDQuMTM2NzE5LTY5LjM1MTU2MiAzNC43NDIxODctNzMuNDg4MjgxIDczLjQ4ODI4MS0xMC4zNjcxODcgOTcuMTcxODc1LTEwLjM2NzE4NyAxOTQuNjMyODEzIDAgMjkxLjgwMDc4MiA0LjEzNjcxOSAzOC43NSAzNC43NDIxODcgNjkuMzU1NDY4IDczLjQ4ODI4MSA3My40ODgyODEgOTcuMTcxODc1IDEwLjM3MTA5MyAxOTQuNjMyODEzIDEwLjM3MTA5MyAyOTEuODAwNzgyIDAgMzguNzUtNC4xMzI4MTMgNjkuMzU1NDY4LTM0LjczODI4MSA3My40ODgyODEtNzMuNDg4MjgxIDEwLjM3MTA5My05Ny4xNjc5NjkgMTAuMzcxMDkzLTE5NC42Mjg5MDcgMC0yOTEuODAwNzgyem0wIDAiIGZpbGw9InVybCgjYykiLz48cGF0aCBkPSJtNy42NzE4NzUgNDA5LjgwNDY4OGMuMzUxNTYzIDMuNTM5MDYyLjcxNDg0NCA3LjA3ODEyNCAxLjA5Mzc1IDEwLjYxNzE4NyA0LjY2MDE1NiA0My42NjQwNjMgMzkuMTQ4NDM3IDc4LjE1MjM0NCA4Mi44MTY0MDYgODIuODEyNSAxMDkuNTAzOTA3IDExLjY4NzUgMjE5LjMzNTkzOCAxMS42ODc1IDMyOC44Mzk4NDQgMCA0My42Njc5NjktNC42NjAxNTYgNzguMTUyMzQ0LTM5LjE0ODQzNyA4Mi44MTI1LTgyLjgxMjUuMzc4OTA2LTMuNTM5MDYzLjc0MjE4Ny03LjA3ODEyNSAxLjA5NzY1Ni0xMC42MTcxODd6bTAgMCIgZmlsbD0idXJsKCNkKSIvPjxwYXRoIGQ9Im00MjAuNDIxODc1IDUwMy4yMzQzNzVjNDMuNjY3OTY5LTQuNjYwMTU2IDc4LjE1MjM0NC0zOS4xNDg0MzcgODIuODEyNS04Mi44MTY0MDYgNi42OTE0MDYtNjIuNjg3NSA5LjU0Mjk2OS0xMjUuNDg0Mzc1IDguNTc0MjE5LTE4OC4yNjk1MzFsLTEyMy40OTIxODgtMTIzLjQ4ODI4MmMtNS40MzM1OTQtNy42NTYyNS0xNC43MjI2NTYtMTIuMjI2NTYyLTI0LjcxODc1LTExLjE0MDYyNS04LjQ2MDkzNy44NjcxODgtMTYuMDU0Njg3IDUuNzk2ODc1LTIwLjI1MzkwNiAxMy4xMjEwOTRsLTY1LjY4MzU5NC0xMy4xMjEwOTRjLTQuNDYwOTM3LTEtOC45MjU3ODEgMS43OTY4NzUtOS45MjU3ODEgNi4zMjgxMjV2LjEzMjgxM2wtMTkuNzg1MTU2IDkyLjk5NjA5M2MtMzcuMzA0Njg4LjYwMTU2My03My42MDkzNzUgMTIuMDU4NTk0LTEwNC41MjM0MzggMzIuOTc2NTYzLTE1LjcxODc1LTE0Ljc4OTA2My00MC41LTE0LjA1NDY4Ny01NS4yODkwNjIgMS43MzQzNzUtMTQuNzg5MDYzIDE1LjcxODc1LTE0LjA1ODU5NCA0MC41IDEuNzMwNDY5IDU1LjI4OTA2Mi43ODkwNjIuNzM4MjgyIDEuNjA5Mzc0IDEuNDQ5MjE5IDIuNDYwOTM3IDIuMTI4OTA3IDEuMTc5Njg3IDEuNDgwNDY5IDIuNDcyNjU2IDIuODk4NDM3IDMuODk4NDM3IDQuMjMwNDY5Ljc4OTA2My43MzgyODEgMS42MDkzNzYgMS40NDkyMTggMi40NjA5MzggMi4xMjUuNDkyMTg4LjYyMTA5MyAxLjAxMTcxOSAxLjIzMDQ2OCAxLjU1MDc4MSAxLjgyNDIxOC0uMDg1OTM3IDIuODQ3NjU2LS4wMzkwNjIgNS42OTkyMTkuMTUyMzQ0IDguNTQ2ODc1IDAgMjQuNDY0ODQ0IDExLjYyODkwNiA0Ny4wNzQyMTkgMzEuMjQyMTg3IDY1LjI3MzQzOGwxNDAuODAwNzgyIDE0MC44MDA3ODFjNDkuMzU1NDY4LS41MjczNDQgOTguNzAzMTI1LTMuNDEwMTU2IDE0Ny45ODgyODEtOC42NzE4NzV6bTAgMCIgZmlsbD0idXJsKCNlKSIvPjxwYXRoIGQ9Im00MzQuNDc2NTYyIDI1OC4zOTg0MzhjLS43OTY4NzQtMjEuNTgyMDMyLTE4LjkxNzk2OC0zOC40Mzc1LTQwLjU2NjQwNi0zNy43MDMxMjYtOS41OTM3NS4zMzIwMzItMTguNzE4NzUgNC4yNjE3MTktMjUuNjQ4NDM3IDEwLjg1NTQ2OS0zMC41MTE3MTktMjAuNzgxMjUtNjYuMzUxNTYzLTMyLjE3NTc4MS0xMDMuMTkxNDA3LTMyLjk3MjY1NmwxNy4zODY3MTktODMuNjA1NDY5IDU3LjM1OTM3NSAxMi4wNTg1OTRjMS41OTc2NTYgMTQuNzIyNjU2IDE0Ljc4OTA2MyAyNS4zNzg5MDYgMjkuNTExNzE5IDIzLjc4MTI1IDE0LjcyMjY1Ni0xLjYwMTU2MiAyNS4zNzg5MDYtMTQuNzg5MDYyIDIzLjc4MTI1LTI5LjUxMTcxOS0xLjYwMTU2My0xNC43MjI2NTYtMTQuNzg5MDYzLTI1LjM4MjgxMi0yOS41MTE3MTktMjMuNzgxMjUtOC40NjA5MzcuODY3MTg4LTE2LjA1NDY4NyA1Ljc5Njg3NS0yMC4yNTM5MDYgMTMuMTIxMDk0bC02NS42ODM1OTQtMTMuMTIxMDk0Yy00LjQ2MDkzNy0xLTguOTI1NzgxIDEuNzk2ODc1LTkuOTI1NzgxIDYuMzI4MTI1di4xMzI4MTNsLTE5Ljc4NTE1NiA5Mi45OTYwOTNjLTM3LjMwNDY4OC42MDE1NjMtNzMuNjA5Mzc1IDEyLjA1ODU5NC0xMDQuNTIzNDM4IDMyLjk3NjU2My0xNS43MTg3NS0xNC43ODkwNjMtNDAuNS0xNC4wNTQ2ODctNTUuMjg5MDYyIDEuNzM0Mzc1LTE0Ljc4OTA2MyAxNS43MTg3NS0xNC4wNTg1OTQgNDAuNSAxLjczMDQ2OSA1NS4yODkwNjIgMy4wNjI1IDIuODY3MTg4IDYuNTkzNzUgNS4zMzIwMzIgMTAuNTIzNDM3IDcuMDYyNS0uMjY1NjI1IDMuOTI5Njg4LS4yNjU2MjUgNy44NTkzNzYgMCAxMS43OTI5NjkgMCA2MC4wMTk1MzEgNjkuOTQ5MjE5IDEwOC44NTE1NjMgMTU2LjIxODc1IDEwOC44NTE1NjNzMTU2LjIxODc1LTQ4Ljc2NTYyNSAxNTYuMjE4NzUtMTA4Ljg1MTU2M2MuMjY1NjI1LTMuOTMzNTkzLjI2NTYyNS03Ljg2MzI4MSAwLTExLjc5Mjk2OSAxMy40NTcwMzEtNi43MjY1NjIgMjEuOTE3OTY5LTIwLjU4MjAzMSAyMS42NDg0MzctMzUuNjQwNjI0em0tMjY4IDI2Ljg0NzY1NmMwLTE0Ljc4OTA2MyAxMi4wNTg1OTQtMjYuODQ3NjU2IDI2Ljg0NzY1Ny0yNi44NDc2NTYgMTQuNzg5MDYyIDAgMjYuODQ3NjU2IDEyLjA1ODU5MyAyNi44NDc2NTYgMjYuODQ3NjU2IDAgMTQuNzg5MDYyLTEyLjA1ODU5NCAyNi44NDc2NTYtMjYuODQ3NjU2IDI2Ljg0NzY1Ni0xNC44NTU0NjktLjEzMjgxMi0yNi44NDc2NTctMTIuMDU4NTk0LTI2Ljg0NzY1Ny0yNi44NDc2NTZ6bTE1NS42ODM1OTQgNzMuNjc5Njg3Yy0xOS4wNTA3ODEgMTQuMzIwMzEzLTQyLjM2NzE4NyAyMS42NDg0MzgtNjYuMjE0ODQ0IDIwLjY1MjM0NC0yMy44NTE1NjIuOTk2MDk0LTQ3LjE2Nzk2OC02LjMzMjAzMS02Ni4yMTg3NS0yMC42NTIzNDQtMi41MzEyNS0zLjA2NjQwNi0yLjA2NjQwNi03LjY2MDE1NiAxLTEwLjE5NTMxMiAyLjY2NDA2My0yLjE5NTMxMyA2LjQ2MDkzOC0yLjE5NTMxMyA5LjE5MTQwNyAwIDE2LjEyMTA5MyAxMS43OTI5NjkgMzUuNzczNDM3IDE3Ljc4OTA2MiA1NS43NTc4MTIgMTYuODU1NDY5IDE5Ljk4NDM3NSAxLjA2NjQwNiAzOS43MDcwMzEtNC42NjQwNjMgNTYuMDI3MzQ0LTE2LjMyMDMxMyAyLjkyOTY4Ny0yLjg2MzI4MSA3LjcyNjU2My0yLjc5Njg3NSAxMC41ODk4NDQuMTMyODEzIDIuODY3MTg3IDIuOTMzNTkzIDIuODAwNzgxIDcuNzI2NTYyLS4xMzI4MTMgMTAuNTkzNzV6bS00Ljc5Njg3NS00NS44OTg0MzdjLTE0Ljc4OTA2MiAwLTI2Ljg0Mzc1LTEyLjA1ODU5NC0yNi44NDM3NS0yNi44NDc2NTYgMC0xNC43ODkwNjMgMTIuMDU0Njg4LTI2Ljg0NzY1NyAyNi44NDM3NS0yNi44NDc2NTcgMTQuNzg5MDYzIDAgMjYuODQ3NjU3IDEyLjA1ODU5NCAyNi44NDc2NTcgMjYuODQ3NjU3LjYwMTU2MiAxNC43ODkwNjItMTAuOTI1NzgyIDI3LjI0NjA5My0yNS43MTQ4NDQgMjcuODQzNzUtLjQ2NDg0NCAwLS44NjMyODIgMC0xLjMzMjAzMiAwem0wIDAiIGZpbGw9IiNmZmYiLz48L3N2Zz4=&quot;);"></a><a class="svg-icon " title="Hacker News" href="https://news.ycombinator.com/submitlink?t=Disabling the borrow checker (DRAFT)&amp;u=https://amokfa.github.io/posts/rust_disable_borrowchecker.html" rel="noopener" target="_blank" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI1NnB4IiBoZWlnaHQ9IjI1NnB4IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+Cgk8Zz4KCQk8cmVjdCBmaWxsPSIjRkI2NTFFIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiI+PC9yZWN0PgoJCTxwYXRoIGQ9Ik0xMTkuMzczNjUzLDE0NC43NDU4MTMgTDc1LjQzMjk2LDYyLjQzMTU3MzMgTDk1LjUxNDQ1MzMsNjIuNDMxNTczMyBMMTIxLjM2MTkyLDExNC41MjQxNiBDMTIxLjc1OTU3NSwxMTUuNDUyMDIyIDEyMi4yMjM1LDExNi40MTMwMDggMTIyLjc1MzcwNywxMTcuNDA3MTQ3IEMxMjMuMjgzOTE0LDExOC40MDEyODUgMTIzLjc0NzgzOCwxMTkuNDI4NTQ2IDEyNC4xNDU0OTMsMTIwLjQ4ODk2IEMxMjQuNDEwNTk3LDEyMC44ODY2MTUgMTI0LjYwOTQyMiwxMjEuMjUxMTI3IDEyNC43NDE5NzMsMTIxLjU4MjUwNyBDMTI0Ljg3NDUyNSwxMjEuOTEzODg2IDEyNS4wMDcwNzUsMTIyLjIxMjEyMyAxMjUuMTM5NjI3LDEyMi40NzcyMjcgQzEyNS44MDIzODYsMTIzLjgwMjc0NCAxMjYuMzk4ODYsMTI1LjA5NTEwNSAxMjYuOTI5MDY3LDEyNi4zNTQzNDcgQzEyNy40NTkyNzQsMTI3LjYxMzU4OSAxMjcuOTIzMTk4LDEyOC43NzMzOTkgMTI4LjMyMDg1MywxMjkuODMzODEzIEMxMjkuMzgxMjY4LDEyNy41ODA0MzMgMTMwLjU0MTA3OCwxMjUuMTYxNCAxMzEuODAwMzIsMTIyLjU3NjY0IEMxMzMuMDU5NTYyLDExOS45OTE4OCAxMzQuMzUxOTIyLDExNy4zMDc3NDcgMTM1LjY3NzQ0LDExNC41MjQxNiBMMTYxLjkyMjU2LDYyLjQzMTU3MzMgTDE4MC42MTIyNjcsNjIuNDMxNTczMyBMMTM2LjI3MzkyLDE0NS43Mzk5NDcgTDEzNi4yNzM5MiwxOTguODI2NjY3IEwxMTkuMzczNjUzLDE5OC44MjY2NjcgTDExOS4zNzM2NTMsMTQ0Ljc0NTgxMyBaIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+Cgk8L2c+Cjwvc3ZnPgo=&quot;);"></a>
                    </div>
                </div>
            </footer>
        </div>
        <div id="right-sidebar">
            <div class="dialog">
                <div class="heading">Settings</div>
                <div class="content"><button>Subscribe</button>
                    <div class="control-buttons">
                        <div id="toggle_theme_wrapper">
                            <div class="svg-icon " id="toggle_theme" style="mask-image: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLW1vb24tZmlsbGVkIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJNMTIgMS45OTJhMTAgMTAgMCAxIDAgOS4yMzYgMTMuODM4Yy4zNDEgLS44MiAtLjQ3NiAtMS42NDQgLTEuMjk4IC0xLjMxYTYuNSA2LjUgMCAwIDEgLTYuODY0IC0xMC43ODdsLjA3NyAtLjA4Yy41NTEgLS42MyAuMTEzIC0xLjY1MyAtLjc1OCAtMS42NTNoLS4yNjZsLS4wNjggLS4wMDZsLS4wNiAtLjAwMnoiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iY3VycmVudENvbG9yIiAvPgo8L3N2Zz4KCgo=&quot;); mask-position: center center; mask-repeat: no-repeat; mask-size: contain; width: 1.3em; height: 1.3em;"></div>
                        </div><a href="/rss.xml">
                            <div class="svg-icon " id="toggle_theme" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaGVpZ2h0PSI1MTJweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzIGlkPSJkZWZzMTkiLz48ZyBpZD0iZzMwMjEiLz48ZyBpZD0iTGF5ZXJfMV8xXyIvPjxnIGlkPSJMYXllcl8xXzFfLTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04MTkuNjcyLC02MS45Mjk5OTEpIi8+PGcgaWQ9ImcyOTg5Ij48cmVjdCBoZWlnaHQ9IjUxMiIgaWQ9InJlY3QyOTg5IiByeD0iNzAiIHJ5PSI3MCIgc3R5bGU9ImZpbGw6I2VhNzgxOTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJzY2FsZSgtMSwtMSkiIHdpZHRoPSI1MTIiIHg9Ii01MTIiIHk9Ii01MTIiLz48cGF0aCBkPSJtIDgxLjA1NjQzLDI2Ny4wNDk1OCBjIDQzLjcwNDEsMCA4NC43ODg3OSwxNy4wNzIxNCAxMTUuNjY0MDcsNDguMTIzOTUgMzAuOTMxNzksMzEuMDUxNzkgNDcuOTYxNTYsNzIuNDExODQgNDcuOTYxNTYsMTE2LjQ0MDcyIGggNjcuMzQ5NTEgYyAwLC0xMjcuODg1NyAtMTAzLjYxODk4LC0yMzEuOTIxMjQgLTIzMC45NzUxNCwtMjMxLjkyMTI0IHYgNjcuMzU2NTcgeiBNIDgxLjE2MjQsMTQ3LjY1MDU0IGMgMTU1Ljc2MDMsMCAyODIuNDg4MDgsMTI3LjQxOTcgMjgyLjQ4ODA4LDI4NC4wNDg0NCBIIDQzMSBDIDQzMSwyMzcuOTI1MjggMjc0LjA1MzU0LDgwLjMwMTAyIDgxLjE2MjQsODAuMzAxMDIgdiA2Ny4zNDk1MiB6IG0gOTMuMTM0MjEsMjM2Ljk5NzY5IGMgMCwyNS43NTY0NyAtMjAuODkxODMsNDYuNjQ4MyAtNDYuNjQ4Myw0Ni42NDgzIEMgMTAxLjg5MTg0LDQzMS4yOTY1MyA4MSw0MTAuNDExNzYgODEsMzg0LjY0ODIzIGMgMCwtMjUuNzcwNiAyMC44ODQ3NywtNDYuNjQ4MzEgNDYuNjQxMjQsLTQ2LjY0ODMxIDI1Ljc1NjQ5LDAgNDYuNjU1MzcsMjAuODc3NzEgNDYuNjU1MzcsNDYuNjQ4MzEgeiIgaWQ9InBhdGgzODQ0IiBzdHlsZT0iZmlsbDojZmZmZmZmIi8+PC9nPjwvc3ZnPg==&quot;); width: 1.3em; height: 1.3em;"></div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="svg-icon open" alt="open right sidebar" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwMDAiIGhlaWdodD0iMTAwMCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KCiAgICA8Y2lyY2xlIGN4PSI1MDAiIGN5PSI1MDAiIHI9IjUwMCIgZmlsbD0iI2ZmZmZmZjg4IiBzdHJva2U9ImJsYWNrIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjEwMCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIC8+CiAgICA8cG9seWxpbmUgcG9pbnRzPSI0MDAsMzAwIDYwMCw1MDAgNDAwLDcwMCIKICAgICAgICAgICAgICBzdHJva2U9IiM1NTU1NTUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2Utd2lkdGg6MTAwOyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIvPgo8L3N2Zz4K&quot;);"></div>
            <div class="svg-icon close" alt="close right sidebar" style="background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwMDAiIGhlaWdodD0iMTAwMCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KCiAgICA8Y2lyY2xlIGN4PSI1MDAiIGN5PSI1MDAiIHI9IjUwMCIgZmlsbD0iI2ZmZmZmZjg4IiBzdHJva2U9ImJsYWNrIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjEwMCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIC8+CiAgICA8cG9seWxpbmUgcG9pbnRzPSI0MDAsMzAwIDYwMCw1MDAgNDAwLDcwMCIKICAgICAgICAgICAgICBzdHJva2U9IiM1NTU1NTUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2Utd2lkdGg6MTAwOyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIvPgo8L3N2Zz4K&quot;);"></div>
        </div>
        <div id="post_load_css" style="display: none;">
            <link rel="stylesheet" href="/static/css/prism.css">
            <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&amp;family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet">
        </div>
    </div>
    <style>
    article img {
        max-height: 25em;
        max-width: 100%;
        display: block;
        margin: 2em auto;
        border: 5px solid #303030;
        border-radius: 10px;
        padding: 5px;
    }
</style>
    <script src="/static/js/dynamic-post.js" defer=""></script>
    <script src="/static/js/mtm.js" defer=""></script>
</body>

</html>